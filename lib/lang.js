var S_UNDEFINED = 'undefined', S_STRING = 'string', S_NUMBER = 'number', S_BOOLEAN = 'boolean', S_OBJECT = 'object', S_FUNCTION = 'function';
exports.isUndefined = function (value) {
    var a = arguments, l = a.length;
    if (l > 1) {
        for (var n = 0; n < l; n++) {
            if (typeof a[n] != S_UNDEFINED) {
                return false;
            }
        }
        return true;
    }
    else {
        return typeof value == S_UNDEFINED;
    }
};
exports.isString = function (value) {
    var a = arguments, l = a.length;
    if (l > 1) {
        for (var n = 0; n < l; n++) {
            if (typeof a[n] != S_STRING) {
                return false;
            }
        }
        return true;
    }
    else {
        return typeof value == S_STRING;
    }
};
exports.isNumber = function (value) {
    var a = arguments, l = a.length;
    if (l > 1) {
        for (var n = 0; n < l; n++) {
            if (typeof a[n] != S_NUMBER) {
                return false;
            }
        }
        return true;
    }
    else {
        return typeof value == S_NUMBER;
    }
};
exports.isBoolean = function (value) {
    var a = arguments, l = a.length;
    if (l > 1) {
        for (var n = 0; n < l; n++) {
            if (typeof a[n] != S_BOOLEAN) {
                return false;
            }
        }
        return true;
    }
    else {
        return typeof value == S_BOOLEAN;
    }
};
exports.isObject = function (value) {
    var a = arguments, l = a.length;
    if (l > 1) {
        for (var n = 0; n < l; n++) {
            var o = a[n];
            if (!(o != null && typeof o == S_OBJECT && !Array.isArray(o))) {
                return false;
            }
        }
        return true;
    }
    else {
        return value != null && typeof value == S_OBJECT && !Array.isArray(value);
    }
};
exports.isFunction = function (value) {
    var a = arguments, l = a.length;
    if (l > 1) {
        for (var n = 0; n < l; n++) {
            if (typeof a[n] != S_FUNCTION) {
                return false;
            }
        }
        return true;
    }
    else {
        return typeof value == S_FUNCTION;
    }
};
/**
 * Returns an array of property name/value pairs.
 * @param map A map object.
 * @returns An array of property name/value pairs.
 */
function properties(map) {
    var result = [];
    forEach(map, function (key, value) {
        result.push({ name: key, value: value });
    });
    return result;
}
exports.properties = properties;
/**
 * Returns array of object property values.
 * @param map A map object.
 * @returns An array of property values.
 */
function values(map) {
    var result = [];
    forEach(map, function (key, value) {
        result.push(value);
    });
    return result;
}
exports.values = values;
/**
 * Convert a list of objects to a map.
 * @param list A list of objects with a specified grouping property.
 * @param name Grouping property name.
 * @returns A map of objects grouped by the key value.
 */
function groupBy(list, name) {
    var result = Object.create(null);
    for (var _i = 0; _i < list.length; _i++) {
        var value = list[_i];
        result[value[name]] = value;
    }
    return result;
}
exports.groupBy = groupBy;
/**
 * Creates a new naked object, and copies own properties from the specified map, if any.
 * A naked object is an object without prototype.
 * @param map A map of properties to copy to the naked object.
 * @returns A new naked object instance.
 */
function naked(map) {
    var result = Object.create(null);
    if (exports.isObject(map)) {
        for (var name_1 in map) {
            if (Object.prototype.hasOwnProperty.call(map, name_1)) {
                result[name_1] = map[name_1];
            }
        }
    }
    return result;
}
exports.naked = naked;
function forEach(map, fn, thisArg) {
    Object.keys(map).forEach(function (key, index) {
        fn.call(thisArg, key, map[key], index, map);
    });
}
exports.forEach = forEach;
function every(map, fn, thisArg) {
    return Object.keys(map).every(function (key, index) {
        return fn.call(thisArg, key, map[key], index, map);
    });
}
exports.every = every;
function some(map, fn, thisArg) {
    return Object.keys(map).some(function (key, index) {
        return fn.call(thisArg, key, map[key], index, map);
    });
}
exports.some = some;
function map(map, fn, thisArg) {
    return mapTo(map, fn, Object.create(Object.getPrototypeOf(map)), thisArg);
}
exports.map = map;
function mapTo(map, fn, to, thisArg) {
    Object.keys(map).forEach(function (key, index) {
        to[key] = fn.call(thisArg, key, map[key], index, map);
    });
    return to;
}
exports.mapTo = mapTo;
function filter(map, fn, thisArg) {
    return filterTo(map, fn, Object.create(Object.getPrototypeOf(map)), thisArg);
}
exports.filter = filter;
function filterTo(map, fn, to, thisArg) {
    Object.keys(map).forEach(function (key, index) {
        if (fn.call(thisArg, key, map[key], index, map)) {
            to[key] = map[key];
        }
    });
    return to;
}
exports.filterTo = filterTo;
function clone(source) {
    var result = Object.create(Object.getPrototypeOf(source));
    Object.getOwnPropertyNames(source).forEach(function (name) {
        Object.defineProperty(result, name, Object.getOwnPropertyDescriptor(source, name));
    });
    return result;
}
exports.clone = clone;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGFuZy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImxhbmcudHMiXSwibmFtZXMiOlsicHJvcGVydGllcyIsInZhbHVlcyIsImdyb3VwQnkiLCJuYWtlZCIsImZvckVhY2giLCJldmVyeSIsInNvbWUiLCJtYXAiLCJtYXBUbyIsImZpbHRlciIsImZpbHRlclRvIiwiY2xvbmUiXSwibWFwcGluZ3MiOiJBQUlBLElBQU0sV0FBVyxHQUFHLFdBQVcsRUFDM0IsUUFBUSxHQUFHLFFBQVEsRUFDbkIsUUFBUSxHQUFHLFFBQVEsRUFDbkIsU0FBUyxHQUFHLFNBQVMsRUFDckIsUUFBUSxHQUFHLFFBQVEsRUFDbkIsVUFBVSxHQUFHLFVBQVUsQ0FBQztBQU1mLG1CQUFXLEdBQWMsVUFBVSxLQUFLO0lBQ2pELElBQUksQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQztJQUNoQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNSLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztZQUN6QixFQUFFLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDO2dCQUM3QixNQUFNLENBQUMsS0FBSyxDQUFDO1lBQ2pCLENBQUM7UUFDTCxDQUFDO1FBQ0QsTUFBTSxDQUFDLElBQUksQ0FBQztJQUNoQixDQUFDO0lBQ0QsSUFBSSxDQUFDLENBQUM7UUFDRixNQUFNLENBQUMsT0FBTyxLQUFLLElBQUksV0FBVyxDQUFDO0lBQ3ZDLENBQUM7QUFDTCxDQUFDLENBQUM7QUFFVyxnQkFBUSxHQUFjLFVBQVUsS0FBSztJQUM5QyxJQUFJLENBQUMsR0FBRyxTQUFTLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxNQUFNLENBQUM7SUFDaEMsRUFBRSxD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LEVBQUVBLElBQUlBLENBQUNBLENBQUNBLENBQUNBO0lBQ3ZGQSxDQUFDQSxDQUFDQSxDQUFDQTtJQUNIQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQTtBQUNsQkEsQ0FBQ0E7QUFOZSxhQUFLLFFBTXBCLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIE1hcDxUPiB7XG4gICAgW25hbWU6IHN0cmluZ106IFQ7XG59XG5cbmNvbnN0IFNfVU5ERUZJTkVEID0gJ3VuZGVmaW5lZCcsXG4gICAgU19TVFJJTkcgPSAnc3RyaW5nJyxcbiAgICBTX05VTUJFUiA9ICdudW1iZXInLFxuICAgIFNfQk9PTEVBTiA9ICdib29sZWFuJyxcbiAgICBTX09CSkVDVCA9ICdvYmplY3QnLFxuICAgIFNfRlVOQ1RJT04gPSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgaW50ZXJmYWNlIFR5cGVDaGVjayB7XG4gICAgKHZhbHVlOiBhbnksIC4uLnJlc3Q6IGFueVtdKTogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNvbnN0IGlzVW5kZWZpbmVkOiBUeXBlQ2hlY2sgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBsZXQgYSA9IGFyZ3VtZW50cywgbCA9IGEubGVuZ3RoO1xuICAgIGlmIChsID4gMSkge1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IGw7IG4rKykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBhW25dICE9IFNfVU5ERUZJTkVEKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSBTX1VOREVGSU5FRDtcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgaXNTdHJpbmc6IFR5cGVDaGVjayA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGxldCBhID0gYXJndW1lbnRzLCBsID0gYS5sZW5ndGg7XG4gICAgaWYgKGwgPiAxKSB7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgbDsgbisrKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIGFbbl0gIT0gU19TVFJJTkcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09IFNfU1RSSU5HO1xuICAgIH1cbn07XG5cbmV4cG9ydCBjb25zdCBpc051bWJlcjogVHlwZUNoZWNrID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgbGV0IGEgPSBhcmd1bWVudHMsIGwgPSBhLmxlbmd0aDtcbiAgICBpZiAobCA+IDEpIHtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBsOyBuKyspIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYVtuXSAhPSBTX05VTUJFUikge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gU19OVU1CRVI7XG4gICAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGlzQm9vbGVhbjogVHlwZUNoZWNrID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgbGV0IGEgPSBhcmd1bWVudHMsIGwgPSBhLmxlbmd0aDtcbiAgICBpZiAobCA+IDEpIHtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBsOyBuKyspIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYVtuXSAhPSBTX0JPT0xFQU4pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09IFNfQk9PTEVBTjtcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgaXNPYmplY3Q6IFR5cGVDaGVjayA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGxldCBhID0gYXJndW1lbnRzLCBsID0gYS5sZW5ndGg7XG4gICAgaWYgKGwgPiAxKSB7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgbDsgbisrKSB7XG4gICAgICAgICAgICBsZXQgbyA9IGFbbl07XG4gICAgICAgICAgICBpZiAoIShvICE9IG51bGwgJiYgdHlwZW9mIG8gPT0gU19PQkpFQ1QgJiYgIUFycmF5LmlzQXJyYXkobykpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09IFNfT0JKRUNUICYmICFBcnJheS5pc0FycmF5KHZhbHVlKTtcbiAgICB9XG59O1xuXG5leHBvcnQgY29uc3QgaXNGdW5jdGlvbjogVHlwZUNoZWNrID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgbGV0IGEgPSBhcmd1bWVudHMsIGwgPSBhLmxlbmd0aDtcbiAgICBpZiAobCA+IDEpIHtcbiAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBsOyBuKyspIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYVtuXSAhPSBTX0ZVTkNUSU9OKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSBTX0ZVTkNUSU9OO1xuICAgIH1cbn07XG5cbi8qKlxuICogUmV0dXJucyBhbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lL3ZhbHVlIHBhaXJzLlxuICogQHBhcmFtIG1hcCBBIG1hcCBvYmplY3QuXG4gKiBAcmV0dXJucyBBbiBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lL3ZhbHVlIHBhaXJzLlxuICovXG5leHBvcnQgZnVuY3Rpb24gcHJvcGVydGllczxUPihtYXA6IE9iamVjdCk6IHsgbmFtZTogc3RyaW5nOyB2YWx1ZTogVDsgfVtdIHtcbiAgICBsZXQgcmVzdWx0ID0gW107XG4gICAgZm9yRWFjaChtYXAsIChrZXksIHZhbHVlKSA9PiB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHsgbmFtZToga2V5LCB2YWx1ZTogdmFsdWUgfSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGFycmF5IG9mIG9iamVjdCBwcm9wZXJ0eSB2YWx1ZXMuXG4gKiBAcGFyYW0gbWFwIEEgbWFwIG9iamVjdC5cbiAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHByb3BlcnR5IHZhbHVlcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbHVlczxUPihtYXA6IE9iamVjdCk6IFRbXSB7XG4gICAgbGV0IHJlc3VsdCA9IFtdO1xuICAgIGZvckVhY2gobWFwLCAoa2V5LCB2YWx1ZSkgPT4ge1xuICAgICAgICByZXN1bHQucHVzaCh2YWx1ZSk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgbGlzdCBvZiBvYmplY3RzIHRvIGEgbWFwLlxuICogQHBhcmFtIGxpc3QgQSBsaXN0IG9mIG9iamVjdHMgd2l0aCBhIHNwZWNpZmllZCBncm91cGluZyBwcm9wZXJ0eS5cbiAqIEBwYXJhbSBuYW1lIEdyb3VwaW5nIHByb3BlcnR5IG5hbWUuXG4gKiBAcmV0dXJucyBBIG1hcCBvZiBvYmplY3RzIGdyb3VwZWQgYnkgdGhlIGtleSB2YWx1ZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdyb3VwQnk8VD4obGlzdDogVFtdLCBuYW1lOiBzdHJpbmcpOiBNYXA8VD4ge1xuICAgIGxldCByZXN1bHQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICAgIGZvciAobGV0IHZhbHVlIG9mIGxpc3QpIHtcbiAgICAgICAgcmVzdWx0W3ZhbHVlW25hbWVdXSA9IHZhbHVlO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgbmFrZWQgb2JqZWN0LCBhbmQgY29waWVzIG93biBwcm9wZXJ0aWVzIGZyb20gdGhlIHNwZWNpZmllZCBtYXAsIGlmIGFueS5cbiAqIEEgbmFrZWQgb2JqZWN0IGlzIGFuIG9iamVjdCB3aXRob3V0IHByb3RvdHlwZS5cbiAqIEBwYXJhbSBtYXAgQSBtYXAgb2YgcHJvcGVydGllcyB0byBjb3B5IHRvIHRoZSBuYWtlZCBvYmplY3QuXG4gKiBAcmV0dXJucyBBIG5ldyBuYWtlZCBvYmplY3QgaW5zdGFuY2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBuYWtlZDxUPihtYXA/OiBUKTogVCB7XG4gICAgbGV0IHJlc3VsdCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gICAgaWYgKGlzT2JqZWN0KG1hcCkpIHtcbiAgICAgICAgZm9yIChsZXQgbmFtZSBpbiBtYXApIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobWFwLCBuYW1lKSkge1xuICAgICAgICAgICAgICAgIHJlc3VsdFtuYW1lXSA9IG1hcFtuYW1lXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9yRWFjaDxUIGV4dGVuZHMgT2JqZWN0PihtYXA6IFQsIGZuOiAoa2V5OiBzdHJpbmcsIHZhbHVlOiBhbnksIGluZGV4OiBudW1iZXIsIG1hcDogVCkgPT4gdm9pZCwgdGhpc0FyZz86IGFueSk6IHZvaWQge1xuICAgIE9iamVjdC5rZXlzKG1hcCkuZm9yRWFjaCgoa2V5LCBpbmRleCkgPT4ge1xuICAgICAgICBmbi5jYWxsKHRoaXNBcmcsIGtleSwgbWFwW2tleV0sIGluZGV4LCBtYXApO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXZlcnk8VCBleHRlbmRzIE9iamVjdD4obWFwOiBULCBmbjogKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBpbmRleDogbnVtYmVyLCBtYXA6IFQpID0+IGJvb2xlYW4sIHRoaXNBcmc/OiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMobWFwKS5ldmVyeSgoa2V5LCBpbmRleCkgPT4ge1xuICAgICAgICByZXR1cm4gZm4uY2FsbCh0aGlzQXJnLCBrZXksIG1hcFtrZXldLCBpbmRleCwgbWFwKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNvbWU8VCBleHRlbmRzIE9iamVjdD4obWFwOiBULCBmbjogKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBpbmRleDogbnVtYmVyLCBtYXA6IFQpID0+IGJvb2xlYW4sIHRoaXNBcmc/OiBhbnkpOiBib29sZWFuIHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMobWFwKS5zb21lKChrZXksIGluZGV4KSA9PiB7XG4gICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXNBcmcsIGtleSwgbWFwW2tleV0sIGluZGV4LCBtYXApO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFwPFQgZXh0ZW5kcyBPYmplY3Q+KG1hcDogVCwgZm46IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgaW5kZXg6IG51bWJlciwgbWFwOiBUKSA9PiBhbnksIHRoaXNBcmc/OiBhbnkpOiBUIHtcbiAgICByZXR1cm4gbWFwVG8obWFwLCBmbiwgT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YobWFwKSksIHRoaXNBcmcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFwVG88VCBleHRlbmRzIE9iamVjdD4obWFwOiBULCBmbjogKGtleTogc3RyaW5nLCB2YWx1ZTogYW55LCBpbmRleDogbnVtYmVyLCBtYXA6IFQpID0+IGFueSwgdG86IFQsIHRoaXNBcmc/OiBhbnkpOiBUIHtcbiAgICBPYmplY3Qua2V5cyhtYXApLmZvckVhY2goKGtleSwgaW5kZXgpID0+IHtcbiAgICAgICAgdG9ba2V5XSA9IGZuLmNhbGwodGhpc0FyZywga2V5LCBtYXBba2V5XSwgaW5kZXgsIG1hcCk7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRvO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZmlsdGVyPFQgZXh0ZW5kcyBPYmplY3Q+KG1hcDogVCwgZm46IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgaW5kZXg6IG51bWJlciwgbWFwOiBUKSA9PiBib29sZWFuLCB0aGlzQXJnPzogYW55KTogVCB7XG4gICAgcmV0dXJuIGZpbHRlclRvKG1hcCwgZm4sIE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKG1hcCkpLCB0aGlzQXJnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZpbHRlclRvPFQgZXh0ZW5kcyBPYmplY3Q+KG1hcDogVCwgZm46IChrZXk6IHN0cmluZywgdmFsdWU6IGFueSwgaW5kZXg6IG51bWJlciwgbWFwOiBUKSA9PiBib29sZWFuLCB0bzogVCwgdGhpc0FyZz86IGFueSk6IFQge1xuICAgIE9iamVjdC5rZXlzKG1hcCkuZm9yRWFjaCgoa2V5LCBpbmRleCkgPT4ge1xuICAgICAgICBpZiAoZm4uY2FsbCh0aGlzQXJnLCBrZXksIG1hcFtrZXldLCBpbmRleCwgbWFwKSkge1xuICAgICAgICAgICAgdG9ba2V5XSA9IG1hcFtrZXldO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHRvO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xvbmU8VCBleHRlbmRzIE9iamVjdD4oc291cmNlOiBUKTogVCB7XG4gICAgbGV0IHJlc3VsdCA9IE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHNvdXJjZSkpO1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHNvdXJjZSkuZm9yRWFjaCgobmFtZSkgPT4ge1xuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkocmVzdWx0LCBuYW1lLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHNvdXJjZSwgbmFtZSkpO1xuICAgIH0pO1xuICAgIHJldHVybiByZXN1bHQ7XG59XG4iXX0=